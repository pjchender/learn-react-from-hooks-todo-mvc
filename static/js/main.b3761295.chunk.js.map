{"version":3,"sources":["components/AddTodo.js","contexts/AuthContext.js","components/Footer.js","components/Header.js","components/TodoItem.js","components/Todos.js","api/todos.js","views/TodoApp.js","views/Login.js","hooks/useFacebookLogin.js","App.js","reportWebVitals.js","index.js"],"names":["AddTodo","inputValue","handleChange","handleKeyPress","handleAddTodo","className","clsx","active","length","htmlFor","id","type","placeholder","onChange","onKeyPress","value","onClick","AuthContext","createContext","status","authResponse","handleFBLogin","handleFBLogout","Container","styled","footer","LogoutBtn","button","Footer","numOfTodos","useContext","Header","TodoItem","todo","handleDelete","handleSave","handleToggleIsDone","updateIsEdit","useState","title","tempTodo","setTempTodo","inputRef","useRef","useEffect","isEdit","current","focus","done","isDone","edit","onDoubleClick","ref","e","target","onKeyDown","event","keyCode","Todos","todos","map","baseURL","getTodos","a","fetch","headers","localStorage","getItem","res","json","createTodo","payload","method","body","JSON","stringify","deleteTodo","patchTodo","TodoApp","setInputValue","setTodos","filter","data","prevTodos","console","log","key","fetchTodos","currentTodo","find","t","div","Title","h1","Button","Login","to","useFacebookLogin","response","setResponse","window","fbAsyncInit","FB","init","appId","process","cookie","xfbml","version","getLoginStatus","setItem","accessToken","AppEvents","logPageView","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","login","scope","logout","App","isAtLogin","useRouteMatch","Provider","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b3761295.chunk.js","sourcesContent":["import clsx from 'clsx';\n\nconst AddTodo = ({\n  inputValue,\n  handleChange,\n  handleKeyPress,\n  handleAddTodo,\n}) => (\n  <div className={clsx('add-todo', { active: inputValue.length > 0 })}>\n    <label className=\"add-todo-icon icon\" htmlFor=\"add-todo-input\"></label>\n    <div className=\"add-todo-input\">\n      <input\n        id=\"add-todo-input\"\n        type=\"text\"\n        placeholder=\"新增工作\"\n        onChange={handleChange}\n        onKeyPress={handleKeyPress}\n        value={inputValue}\n      />\n    </div>\n    <div className=\"add-todo-action\">\n      <button className=\"btn-reset btn-add\" onClick={handleAddTodo}>\n        {' '}\n        新增{' '}\n      </button>\n    </div>\n  </div>\n);\n\nexport default AddTodo;\n","import { createContext } from 'react';\n\nconst AuthContext = createContext({\n  status: null,\n  authResponse: null,\n  handleFBLogin: null,\n  handleFBLogout: null,\n});\n\nexport default AuthContext;\n","import styled from 'styled-components';\nimport AuthContext from 'contexts/AuthContext';\nimport { useContext } from 'react';\n\nconst Container = styled.footer`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst LogoutBtn = styled.button`\n  font-size: 14px;\n  font-weight: 300;\n  margin: 2rem 0 1rem;\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst Footer = ({ numOfTodos }) => {\n  const { handleFBLogout } = useContext(AuthContext);\n  return (\n    <Container>\n      <p>剩餘項目數：{numOfTodos}</p>\n      <LogoutBtn className=\"btn-reset\" onClick={handleFBLogout}>\n        登出\n      </LogoutBtn>\n    </Container>\n  );\n};\n\nexport default Footer;\n","const Header = () => (\n  <header>\n    <h3>Tasks</h3>\n  </header>\n);\n\nexport default Header;\n","import clsx from 'clsx';\nimport { useState, useRef, useEffect } from 'react';\n\nconst TodoItem = ({\n  todo,\n  handleDelete,\n  handleSave,\n  handleToggleIsDone,\n  updateIsEdit,\n}) => {\n  const [tempTodo, setTempTodo] = useState(todo.title);\n  const inputRef = useRef(null);\n\n  const handleChange = (e) => {\n    setTempTodo(e.target.value);\n  };\n\n  // autofocus when input is in edit mode\n  useEffect(() => {\n    if (todo.isEdit) {\n      inputRef.current.focus();\n    }\n  }, [todo.isEdit]);\n\n  const handleKeyDown = (event) => {\n    // keyCode 13 一定是 enter，但 enter 的 keyCode 不一定是 13\n    if (event.keyCode === 13 && tempTodo.length !== 0) {\n      handleSave({\n        id: todo.id,\n        title: tempTodo,\n        isDone: todo.isDone,\n      });\n    }\n\n    // keyCode 27 是 Escape\n    if (event.keyCode === 27) {\n      // 取消儲存\n      updateIsEdit({\n        id: todo.id,\n        isEdit: false,\n      });\n\n      // 把 tempTodo 改成修改前的內容\n      setTempTodo(todo.title);\n    }\n  };\n\n  return (\n    <div\n      className={clsx('task-item', {\n        done: todo.isDone,\n        edit: todo.isEdit,\n      })}\n    >\n      <div className=\"task-item-checked\">\n        <span\n          className=\"icon icon-checked\"\n          onClick={handleToggleIsDone(todo.id)}\n        />\n      </div>\n      <div\n        className=\"task-item-body\"\n        onDoubleClick={() => updateIsEdit({ id: todo.id, isEdit: true })}\n      >\n        <span className=\"task-item-body-text\">{todo.title}</span>\n        <input\n          ref={inputRef}\n          className=\"task-item-body-input\"\n          type=\"text\"\n          placeholder=\"新增工作\"\n          value={tempTodo}\n          onChange={handleChange}\n          onKeyDown={handleKeyDown}\n        />\n      </div>\n      <div className=\"task-item-action\">\n        <button\n          className=\"btn-reset btn-destroy icon\"\n          onClick={handleDelete(todo.id)}\n        >\n          {' '}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default TodoItem;\n","import TodoItem from './TodoItem';\n\nconst Todos = ({\n  todos,\n  handleDelete,\n  handleSave,\n  handleToggleIsDone,\n  updateIsEdit,\n}) => (\n  <div className=\"todos\">\n    {todos.map((todo) => (\n      <TodoItem\n        key={todo.id}\n        todo={todo}\n        handleDelete={handleDelete}\n        handleSave={handleSave}\n        handleToggleIsDone={handleToggleIsDone}\n        updateIsEdit={updateIsEdit}\n      />\n    ))}\n  </div>\n);\n\nexport default Todos;\n","const baseURL = 'https://todo-mvc.herokuapp.com/api/v1';\n\nexport const getTodos = async () => {\n  const res = await fetch(`${baseURL}/todos/`, {\n    headers: {\n      'Facebook-Client-Token': localStorage.getItem('facebookClientToken'),\n    },\n  });\n\n  return res.json();\n};\n\nexport const createTodo = async (payload) => {\n  const { title, isDone } = payload;\n  const res = await fetch(`${baseURL}/todos/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Facebook-Client-Token': localStorage.getItem('facebookClientToken'),\n    },\n    body: JSON.stringify({\n      title,\n      isDone,\n    }),\n  });\n\n  return res.json();\n};\n\nexport const deleteTodo = async (id) => {\n  const res = await fetch(`${baseURL}/todos/${id}`, {\n    method: 'DELETE',\n    headers: {\n      'Facebook-Client-Token': localStorage.getItem('facebookClientToken'),\n    },\n  });\n\n  return res.json();\n};\n\nexport const patchTodo = async (payload) => {\n  const { id, title, isDone } = payload;\n\n  const res = await fetch(`${baseURL}/todos/${id}`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n      'Facebook-Client-Token': localStorage.getItem('facebookClientToken'),\n    },\n    body: JSON.stringify({\n      title,\n      isDone,\n    }),\n  });\n\n  return res.json();\n};\n","import 'App.scss';\n\nimport AddTodo from 'components/AddTodo';\nimport Footer from 'components/Footer';\nimport Header from 'components/Header';\nimport Todos from 'components/Todos';\nimport { useState, useEffect } from 'react';\nimport { getTodos, createTodo, deleteTodo, patchTodo } from 'api/todos';\n\nconst TodoApp = () => {\n  const [inputValue, setInputValue] = useState('');\n  const [todos, setTodos] = useState([]);\n\n  const numOfTodos = todos.filter((todo) => !todo.isDone).length;\n\n  const handleChange = (e) => {\n    setInputValue(e.target.value);\n  };\n\n  const handleAddTodo = async () => {\n    try {\n      if (inputValue.length === 0) {\n        return;\n      }\n\n      const data = await createTodo({\n        title: inputValue,\n        isDone: false,\n      });\n\n      setTodos((prevTodos) => {\n        return [\n          ...prevTodos,\n          {\n            ...data,\n            isEdit: false,\n          },\n        ];\n      });\n\n      setInputValue('');\n    } catch (error) {\n      console.log('[handleAddTodo] createTodo failed: ', error);\n    }\n  };\n\n  const handleKeyPress = async (event) => {\n    try {\n      if (event.key !== 'Enter') {\n        return;\n      }\n\n      if (inputValue.length === 0) {\n        return;\n      }\n\n      const data = await createTodo({\n        title: inputValue,\n        isDone: false,\n      });\n\n      setTodos((prevTodos) => {\n        return [\n          ...prevTodos,\n          {\n            ...data,\n            isEdit: false,\n          },\n        ];\n      });\n\n      setInputValue('');\n    } catch (error) {\n      console.log('[handleKeyPress] createTodo failed: ', error);\n    }\n  };\n\n  const handleDelete = (id) => async () => {\n    try {\n      setTodos((prevTodos) => prevTodos.filter((todo) => todo.id !== id));\n      await deleteTodo(id);\n    } catch (error) {\n      console.log('[handleDelete] deleteTodo failed: ', error);\n    }\n  };\n\n  const handleToggleIsDone = (id) => async () => {\n    try {\n      const currentTodo = todos.find((t) => t.id === id);\n\n      setTodos((prevTodos) =>\n        prevTodos.map((todo) => {\n          if (todo.id !== id) {\n            return todo;\n          } else {\n            return {\n              ...todo,\n              isDone: !todo.isDone,\n            };\n          }\n        })\n      );\n\n      await patchTodo({\n        id,\n        title: currentTodo.title,\n        isDone: !currentTodo.isDone,\n      });\n    } catch (error) {\n      console.log('[handleToggleIsDone] patchTodo failed: ', error);\n    }\n  };\n\n  const handleSave = async (payload) => {\n    try {\n      const { id, title } = payload;\n\n      setTodos((prevTodos) =>\n        prevTodos.map((todo) => {\n          if (todo.id !== id) {\n            return todo;\n          }\n          return { ...todo, title, isEdit: false };\n        })\n      );\n\n      await patchTodo({\n        id,\n        title,\n      });\n    } catch (error) {\n      console.log('[handleSave] patchTodo failed: ', error);\n    }\n  };\n\n  const updateIsEdit = ({ id, isEdit }) => {\n    setTodos((prevTodos) =>\n      prevTodos.map((todo) => {\n        if (todo.id !== id) {\n          return todo;\n        }\n        return { ...todo, isEdit };\n      })\n    );\n  };\n\n  useEffect(() => {\n    const fetchTodos = async () => {\n      try {\n        const todos = await getTodos();\n\n        setTodos(\n          todos.map((todo) => ({\n            ...todo,\n            isEdit: false,\n          }))\n        );\n      } catch (error) {\n        console.log('fetchTodos error', error);\n      }\n    };\n\n    fetchTodos();\n  }, []);\n\n  return (\n    <div>\n      <Header />\n      <AddTodo\n        inputValue={inputValue}\n        handleChange={handleChange}\n        handleKeyPress={handleKeyPress}\n        handleAddTodo={handleAddTodo}\n      />\n      <Todos\n        todos={todos}\n        handleDelete={handleDelete}\n        handleSave={handleSave}\n        handleToggleIsDone={handleToggleIsDone}\n        updateIsEdit={updateIsEdit}\n      />\n      <Footer numOfTodos={numOfTodos} />\n    </div>\n  );\n};\n\nexport default TodoApp;\n","import styled from 'styled-components';\nimport { Redirect } from 'react-router-dom';\nimport AuthContext from 'contexts/AuthContext';\nimport { useContext } from 'react';\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Title = styled.h1`\n  text-align: center;\n  font-family: 'Noto Sans TC', sans-serif;\n  margin: 2rem 0;\n`;\n\nconst Button = styled.button`\n  background: #1877f2;\n  color: white;\n  min-width: 200px;\n  font-family: 'Noto Sans TC', sans-serif;\n  font-weight: bold;\n  padding: 6px 0;\n  margin: 2rem 0;\n\n  &:hover {\n    background: #385898;\n  }\n`;\n\nconst Login = () => {\n  const { status, handleFBLogin } = useContext(AuthContext);\n\n  if (status === 'connected') {\n    return <Redirect to=\"/todos\" />;\n  }\n\n  return (\n    <Container>\n      <Title>登入 Todo</Title>\n      <Button className=\"btn-reset\" onClick={handleFBLogin}>\n        {' '}\n        使用 Facebook 登入{' '}\n      </Button>\n    </Container>\n  );\n};\n\nexport default Login;\n","import { useState, useEffect } from 'react';\n\nconst useFacebookLogin = () => {\n  const [response, setResponse] = useState();\n\n  useEffect(() => {\n    // SDK 載入完成時會立即呼叫 fbAsyncInit，在這個函式中對 Facebook SDK 進行初始化\n    window.fbAsyncInit = function () {\n      // 初始化 Facebook SDK\n      window.FB.init({\n        appId: process.env.REACT_APP_FB_APP_ID,\n        cookie: true,\n        xfbml: true,\n        version: process.env.REACT_APP_FB_APP_VERSION,\n      });\n\n      console.log('[fbAsyncInit] after window.FB.init');\n\n      // 取得使用者登入狀態\n      window.FB.getLoginStatus(function (response) {\n        // console.log('[refreshLoginStatus]', response);\n        localStorage.setItem(\n          'facebookClientToken',\n          response?.authResponse?.accessToken\n        );\n        setResponse(response);\n      });\n\n      window.FB.AppEvents.logPageView();\n    };\n    // 載入 Facebook SDK\n    (function (d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) {\n        return;\n      }\n      js = d.createElement(s);\n      js.id = id;\n      js.src = 'https://connect.facebook.net/en_US/sdk.js';\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  }, []);\n\n  const handleFBLogin = () => {\n    // 跳出 Facebook 登入的對話框\n    window.FB.login(\n      function (response) {\n        // console.log('handleFBLogin', response);\n        setResponse(response);\n        localStorage.setItem(\n          'facebookClientToken',\n          response?.authResponse?.accessToken\n        );\n      },\n      { scope: 'public_profile,email' }\n    );\n  };\n\n  const handleFBLogout = () => {\n    window.FB.logout(function (response) {\n      // console.log('handleFBLogout', response);\n      localStorage.setItem(\n        'facebookClientToken',\n        response?.authResponse?.accessToken\n      );\n      setResponse(response);\n    });\n  };\n\n  return [response, handleFBLogin, handleFBLogout];\n};\n\nexport default useFacebookLogin;\n","import './App.scss';\n\nimport TodoApp from 'views/TodoApp';\nimport Login from 'views/Login';\nimport useFacebookLogin from 'hooks/useFacebookLogin';\nimport { Switch, Route, Redirect, useRouteMatch } from 'react-router-dom';\nimport AuthContext from './contexts/AuthContext';\n\nconst App = () => {\n  const [response, handleFBLogin, handleFBLogout] = useFacebookLogin();\n  const isAtLogin = useRouteMatch('/login');\n\n  if (!response) {\n    return <></>;\n  }\n\n  if (response.status !== 'connected' && !isAtLogin) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        status: response.status,\n        authResponse: response.authResponse,\n        handleFBLogin,\n        handleFBLogout,\n      }}\n    >\n      <div className=\"app\">\n        <Switch>\n          <Route exact path=\"/\">\n            {response.status === 'connected' ? (\n              <Redirect to=\"/todos\" />\n            ) : (\n              <Redirect to=\"/login\" />\n            )}\n          </Route>\n          <Route path=\"/login\">\n            <Login />\n          </Route>\n          <Route path=\"/todos\">\n            <TodoApp />\n          </Route>\n        </Switch>\n      </div>\n    </AuthContext.Provider>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}